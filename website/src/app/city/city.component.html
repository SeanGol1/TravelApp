<div class="city-item" cdkDrag [cdkDragData]="city" [cdkDragStartDelay]="500">
  <div class="row">
    <div class="col-8">
      <p *ngIf="(data.isAdmin$| async)" (click)="openInfoDialog()">{{city?.name}}</p>
      <p *ngIf="!(data.isAdmin$| async)">{{city?.name}}</p>
    </div>
    <div class="col-4">
      <!-- <button mat-mini-fab color="primary" aria-label="Add ToDo Item">
        <mat-icon>add</mat-icon> <mat-icon>more_vert</mat-icon>
      </button> -->
      <button mat-mini-fab color="primary" [matMenuTriggerFor]="menu" *ngIf="(data.isAdmin$| async)">
        <mat-icon>more_vert</mat-icon>
      </button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="openAddTodoDialog()">Add To Do</button>
        <button mat-menu-item (click)="openInfoDialog()">View/Edit City</button>
        <button mat-menu-item (click)="deleteCity()">Delete City</button>
        <button mat-menu-item (click)="openTravelDialog()">Add Travel</button>
        <button mat-menu-item (click)="deleteTravel()">Delete Travel</button>

      </mat-menu>
    </div>
    <!-- <div class="col-4">
      <button mat-raised-button (click)="openDialog()">Add To-Do</button>
    </div> -->
  </div>
  <!-- <div cdkDropList [cdkDropListData]="city?.toDos" (cdkDropListDropped)="drop($event)" class="citydroplist">
    @for (todo of city?.toDos; track todo) {
    <app-todo cdkDrag [cdkDragData]="todo" [todo]="todo"></app-todo>
    }
  </div> -->

  <mat-tab-group preserveContent (selectedTabChange)="onTabChange($event)">

    <mat-tab label="My ToDos">
      <div>
        @for (todo of city?.toDos; track todo) {
        <app-todo [todo]="todo"></app-todo>
        }
      </div>
    </mat-tab>
    <mat-tab label="Details">
      <h4>Top Attractions in the Area:</h4>
      <div id="attractionsCarousel" class="carousel slide">
        <div class="carousel-inner">
          <div class="carousel-item" *ngFor="let a of attractions; let i = index" [ngClass]="{ 'active': i === 0 }">
            <img [src]=" baseUrl + 'cities/googlephoto/' + a.photos[0].photo_Reference" alt="{{a.name}}"
              class="carousel-img" />
            <div class="">
              <h5>{{a.name}}</h5>
              <p>‚≠ê {{ a.rating }}</p>
              <div class="row">
                <div class="col-6">
                  <a *ngIf="a.website" mat-flat-button color="primary" href="{{a.website}}" target="_blank">
                    Visit Website
                  </a>
                </div>
                <div class="col-6">
                  <button mat-flat-button color="primary" (click)="addAttraction(a.name)">Add to My List</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#attractionsCarousel" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#attractionsCarousel" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
    </mat-tab>
  </mat-tab-group>
</div>

<div *ngIf="travel" class="travel-item">
  <div class="row">
    <div class="col-12">

      @switch (travel.travelType) {
      @case (0) {
      <app-flight-animation></app-flight-animation>
      }
      @case (1) {
      <app-bus-animation></app-bus-animation>
      }
      @case (2) {
      <app-train-animation></app-train-animation>
      }
      @case (3) {
      <app-boat-animation></app-boat-animation>
      }
      @case (4) {
      <app-scooter-animation></app-scooter-animation>
      }
      @case (5) {
      <app-walk-animation></app-walk-animation>
      }
      @case (6) {
      <app-taxi-animation></app-taxi-animation>
      }
      }
      <!-- <p>{{enum[travel.travelType]}}</p>
      <p>{{travel.fromCity.name}} ===> {{travel.toCity.name}}</p> -->
    </div>
  </div>
</div>